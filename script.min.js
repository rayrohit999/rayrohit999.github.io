document.addEventListener('DOMContentLoaded',function(){AOS.init({duration:800,easing:'ease',once:!0,mirror:!1,disable:function(){return window.innerWidth<576}});const e=document.querySelectorAll('img[data-src]');if('IntersectionObserver'in window){const t=new IntersectionObserver((e,n)=>{e.forEach(e=>{if(e.isIntersecting){const o=e.target,r=o.parentElement;r.classList.contains('project-img')&&r.classList.add('loading'),o.src=o.dataset.src,o.onload=function(){o.removeAttribute('data-src'),r.classList.contains('loading')&&r.classList.remove('loading')},t.unobserve(o)}})});e.forEach(e=>{t.observe(e)})}else e.forEach(e=>{e.src=e.dataset.src});function n(){const e=document.querySelectorAll('.project-img img');e.forEach(e=>{e.complete?e.parentElement.classList.remove('loading'):(e.parentElement.classList.add('loading'),e.onload=function(){e.parentElement.classList.remove('loading')})})}n(),window.addEventListener('resize',n);const o=document.querySelector('.typed-text'),r=document.querySelector('.cursor'),i=['Web Developer','UI/UX Designer','Software Engineer','Problem Solver'];let s=0,a=0;function c(){a<i[s].length?(r.classList.contains('typing')||r.classList.add('typing'),o.textContent+=i[s].charAt(a),a++,setTimeout(c,100)):(r.classList.remove('typing'),setTimeout(l,2e3))}function l(){a>0?(r.classList.contains('typing')||r.classList.add('typing'),o.textContent=i[s].substring(0,a-1),a--,setTimeout(l,50)):(r.classList.remove('typing'),s++,s>=i.length&&(s=0),setTimeout(c,1200))}i.length&&setTimeout(c,2250);const u=document.querySelector('.navbar'),d=document.querySelectorAll('.nav-link'),m=document.querySelectorAll('section');window.addEventListener('scroll',function(){window.scrollY>50?u.classList.add('scrolled'):u.classList.remove('scrolled');let e='';m.forEach(t=>{const n=t.offsetTop-100;pageYOffset>=n&&(e=t.getAttribute('id'))}),d.forEach(t=>{t.classList.remove('active'),t.getAttribute('href').substring(1)===e&&t.classList.add('active')});const t=document.querySelector('.back-to-top');window.scrollY>300?t.classList.add('active'):t.classList.remove('active')});const f=document.querySelector('.menu-toggle'),p=document.querySelector('.nav-links'),g=document.querySelector('.nav-overlay'),y=document.body;function h(){f.classList.toggle('active'),p.classList.toggle('active'),g&&g.classList.toggle('active'),p.classList.contains('active')?y.style.overflow='hidden':y.style.overflow=''}f.addEventListener('click',h),g&&g.addEventListener('click',function(){p.classList.contains('active')&&h()}),document.addEventListener('click',function(e){const t=e.target.closest('.menu-toggle'),n=e.target.closest('.nav-links');!t&&!n&&p.classList.contains('active')&&h()}),d.forEach(e=>{e.addEventListener('click',function(){p.classList.contains('active')&&h()})}),document.addEventListener('keydown',function(e){'Escape'===e.key&&p.classList.contains('active')&&h()});const v=document.querySelectorAll('.filter-btn'),b=document.querySelectorAll('.project-card');v.forEach(e=>{e.addEventListener('click',function(){v.forEach(e=>e.classList.remove('active')),this.classList.add('active');const t=this.getAttribute('data-filter');b.forEach(e=>{'all'===t||e.getAttribute('data-category')===t?(e.style.display='block',setTimeout(()=>{e.style.opacity='1',e.style.transform='scale(1)'},100)):(e.style.opacity='0',e.style.transform='scale(0.8)',setTimeout(()=>{e.style.display='none'},300))})})});const w=document.getElementById('contactForm'),E=w?w.querySelector('.submit-btn'):null;w&&E&&w.addEventListener('submit',function(e){e.preventDefault();const t=E.innerHTML;E.innerHTML='<span>Sending...</span><i class=\"fas fa-spinner fa-spin\"></i>',E.disabled=!0;const n=new FormData(w);fetch(w.action,{method:'POST',body:n,headers:{Accept:'application/json'}}).then(e=>{if(e.ok)w.reset(),E.innerHTML='<span>Message Sent!</span><i class=\"fas fa-check\"></i>',E.style.backgroundColor='#28a745',x('Thank you for your message! I will get back to you soon.','success'),setTimeout(()=>{E.innerHTML=t,E.disabled=!1,E.style.backgroundColor=''},3e3);else throw new Error('Network response was not ok')}).catch(e=>{console.error('Error:',e),E.innerHTML='<span>Try Again</span><i class=\"fas fa-exclamation-triangle\"></i>',E.style.backgroundColor='#dc3545',x('Sorry, there was an error sending your message. Please try again.','error'),setTimeout(()=>{E.innerHTML=t,E.disabled=!1,E.style.backgroundColor=''},3e3)})});function x(e,t='info'){const n=document.createElement('div');n.className=`notification notification-${t}`,n.innerHTML=`\n            <div class=\"notification-content\">\n                <i class=\"fas ${'success'===t?'fa-check-circle':'error'===t?'fa-exclamation-circle':'fa-info-circle'}\"></i>\n                <span>${e}</span>\n            </div>\n            <button class=\"notification-close\" onclick=\"this.parentElement.remove()\">\n                <i class=\"fas fa-times\"></i>\n            </button>\n        `,document.body.appendChild(n),setTimeout(()=>n.classList.add('show'),100),setTimeout(()=>{n.classList.remove('show'),setTimeout(()=>n.remove(),300)},5e3)}document.querySelectorAll('a[href^=\"#\"]').forEach(e=>{e.addEventListener('click',function(e){e.preventDefault();const t=this.getAttribute('href'),n=document.querySelector(t);n&&window.scrollTo({top:n.offsetTop-70,behavior:'smooth'})})}),f.addEventListener('click',function(){const e=document.querySelectorAll('.bar');e.forEach(e=>e.classList.toggle('animate'))});const k=document.createElement('style');k.textContent='\n        .menu-toggle.active .bar:nth-child(1) {\n            transform: translateY(9px) rotate(45deg);\n        }\n        \n        .menu-toggle.active .bar:nth-child(2) {\n            opacity: 0;\n        }\n        \n        .menu-toggle.active .bar:nth-child(3) {\n            transform: translateY(-9px) rotate(-45deg);\n        }\n    ',document.head.appendChild(k);let L=0,T=0;const S='ontouchstart'in window||navigator.maxTouchPoints>0;function A(){const e=T-L>100,t=L-T>100;e&&L<50&&!p.classList.contains('active')&&h(),t&&p.classList.contains('active')&&h()}S&&(document.addEventListener('touchstart',function(e){L=e.changedTouches[0].screenX},!1),document.addEventListener('touchend',function(e){T=e.changedTouches[0].screenX,A()},!1)),window.addEventListener('resize',function(){window.innerWidth>768&&p.classList.contains('active')&&h()})});
